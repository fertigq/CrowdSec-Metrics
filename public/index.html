<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>System Metrics Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .metric-card {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>System Metrics Dashboard</h1>
    
    <div class="metrics-grid">
        <div class="metric-card">
            <h2>Uptime</h2>
            <pre id="uptime-info">Loading...</pre>
        </div>
        
        <div class="metric-card">
            <h2>Load Average</h2>
            <pre id="load-average">Loading...</pre>
        </div>
        
        <div class="metric-card">
            <h2>CPU Usage</h2>
            <pre id="cpu-usage">Loading...</pre>
        </div>
        
        <div class="metric-card">
            <h2>Memory Usage</h2>
            <pre id="memory-usage">Loading...</pre>
        </div>
        
        <div class="metric-card">
            <h2>Disk Usage</h2>
            <pre id="disk-usage">Loading...</pre>
        </div>
        
        <div class="metric-card">
            <h2>Network Connections</h2>
            <pre id="network-connections">Loading...</pre>
        </div>
    </div>

    <script>
        async function fetchSystemMetrics() {
            try {
                const response = await fetch('/api/system-metrics');
                const metrics = await response.json();

                // Update metric displays
                document.getElementById('uptime-info').textContent = metrics.uptime;
                document.getElementById('load-average').textContent = metrics.loadAverage;
                document.getElementById('cpu-usage').textContent = metrics.cpu;
                document.getElementById('memory-usage').textContent = metrics.memory;
                document.getElementById('disk-usage').textContent = metrics.disk;
                document.getElementById('network-connections').textContent = metrics.network;
            } catch (error) {
                console.error('Failed to fetch metrics:', error);
            }
        }

        // Fetch metrics immediately and then every 30 seconds
        fetchSystemMetrics();
        setInterval(fetchSystemMetrics, 30000);
    </script>
</body>
</html>
